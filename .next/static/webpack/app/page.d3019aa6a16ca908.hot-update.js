"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/services/cozeService.ts":
/*!*************************************!*\
  !*** ./src/services/cozeService.ts ***!
  \*************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendMessageToCoze: function() { return /* binding */ sendMessageToCoze; }\n/* harmony export */ });\n/**\r\n * cozeService.ts\r\n * Coze API服务 - 处理与Coze API的通信\r\n */ // 错误消息\nconst ERROR_MESSAGES = {\n    NETWORK: \"网络连接失败，请检查您的网络连接。\",\n    SERVER: \"服务器处理请求失败，请稍后重试。\",\n    GENERAL: \"发送消息时出现错误，请稍后重试。\",\n    STREAM: \"流式响应中断，请刷新页面重试。\",\n    API_KEY_MISSING: \"缺少API密钥，请检查环境配置。\",\n    BOT_ID_MISSING: \"缺少机器人ID，请检查环境配置。\",\n    PARAMETER_ERROR: \"API参数错误，请联系开发人员。\",\n    SHORTCUT_ID_MISSING: \"缺少快捷指令ID，请检查环境配置。\"\n};\n// Coze配置\nconst COZE_CONFIG = {\n    // 如果有环境变量则使用环境变量，否则使用默认值（应该在运行时被正确设置）\n    SHORTCUT_COMMAND_ID:  true ? window.ENV_COZE_SHORTCUT_COMMAND_ID : 0\n};\n/**\r\n * 构建媒体内容为Coze API可接受的格式\r\n * @param media 媒体内容数组\r\n * @returns 转换后的Coze格式媒体内容\r\n */ const formatMediaContent = (media)=>{\n    if (!media || media.length === 0) return [];\n    return media.map((item)=>({\n            type: item.type.toLowerCase(),\n            url: item.url\n        }));\n};\n/**\r\n * 发送消息到Coze API并获取流式响应 (通过本地API代理)\r\n *\r\n * @param message 用户消息内容\r\n * @param media 媒体内容数组\r\n * @param onChunk 接收数据块的回调函数\r\n * @param onComplete 响应完成的回调函数\r\n * @returns 清理函数，用于中断请求\r\n */ const sendMessageToCoze = async function(message) {\n    let media = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [], onChunk = arguments.length > 2 ? arguments[2] : void 0, onComplete = arguments.length > 3 ? arguments[3] : void 0;\n    // 创建AbortController用于中断请求\n    const controller = new AbortController();\n    const signal = controller.signal;\n    try {\n        // 构建请求体 - 使用本地API代理，适配Coze API v3\n        const requestBody = {\n            user_id: \"user_\" + Date.now(),\n            messages: [\n                {\n                    role: \"user\",\n                    content: message,\n                    // 如果有媒体内容，则添加到请求中\n                    ...media.length > 0 && {\n                        media: formatMediaContent(media)\n                    }\n                }\n            ],\n            stream: true,\n            // 添加快捷指令ID（如果有）\n            ...COZE_CONFIG.SHORTCUT_COMMAND_ID && {\n                shortcut_command_id: COZE_CONFIG.SHORTCUT_COMMAND_ID\n            }\n        };\n        console.log(\"准备发送请求到本地API代理:\", \"/api/chat\");\n        console.log(\"请求体:\", JSON.stringify(requestBody));\n        // 发送请求到本地API代理\n        const response = await fetch(\"/api/chat\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(requestBody),\n            signal\n        });\n        console.log(\"API响应状态:\", response.status);\n        console.log(\"API响应头部:\", Object.fromEntries(response.headers.entries()));\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(\"API错误:\", response.status, errorText);\n            onChunk(\"服务器返回错误: \".concat(response.status));\n            if (onComplete) onComplete(); // 通知完成（出错）\n            return ()=>controller.abort();\n        }\n        // 检查响应是否支持流式传输\n        if (!response.body) {\n            console.error(\"响应不支持流式传输\");\n            onChunk(ERROR_MESSAGES.STREAM);\n            if (onComplete) onComplete(); // 通知完成（出错）\n            return ()=>controller.abort();\n        }\n        // 处理流式响应\n        const reader = response.body.getReader();\n        const decoder = new TextDecoder();\n        console.log(\"开始处理流式响应\");\n        // 记录收到的总内容（用于调试）\n        let receivedContent = \"\";\n        let hasReceivedContent = false;\n        // 异步处理流数据\n        const processStream = async ()=>{\n            try {\n                let isDone = false;\n                while(!isDone){\n                    const { done, value } = await reader.read();\n                    if (done) {\n                        console.log(\"流式响应完成（读取器返回done）\");\n                        if (!hasReceivedContent) {\n                            console.log(\"整个响应过程中未收到任何有效内容\");\n                            onChunk(\"抱歉，服务器没有返回有效回复。\");\n                        }\n                        if (onComplete) onComplete(); // 通知前端响应已完成\n                        break;\n                    }\n                    // 解码二进制数据\n                    const chunk = decoder.decode(value, {\n                        stream: true\n                    });\n                    console.log(\"收到数据块原始内容:\", chunk);\n                    receivedContent += chunk;\n                    // 尝试不同的解析方式处理SSE格式的数据\n                    try {\n                        // 1. 首先尝试标准的SSE格式解析（data: {...} 格式）\n                        const lines = chunk.split(\"\\n\").filter((line)=>line.trim() !== \"\");\n                        let hasProcessedValidData = false;\n                        for (const line of lines){\n                            console.log(\"处理行:\", line);\n                            try {\n                                // 检查是否为SSE格式\n                                if (line.startsWith(\"data:\")) {\n                                    const jsonStr = line.substring(5).trim();\n                                    // 检查是否为[DONE]标记\n                                    if (jsonStr === \"[DONE]\") {\n                                        console.log(\"收到[DONE]标记，响应结束\");\n                                        isDone = true;\n                                        if (onComplete) onComplete(); // 通知前端响应已完成\n                                        break;\n                                    }\n                                    // 尝试解析JSON数据\n                                    try {\n                                        const data = JSON.parse(jsonStr);\n                                        console.log(\"解析到JSON数据:\", data);\n                                        // 检查是否有错误信息\n                                        if (data.status === \"failed\" && data.last_error) {\n                                            console.error(\"Coze API返回错误:\", data.last_error);\n                                            const errorMsg = data.last_error.code === 4000 ? \"\".concat(ERROR_MESSAGES.PARAMETER_ERROR, \"（错误码：\").concat(data.last_error.code, \"，信息：\").concat(data.last_error.msg, \"）\") : \"错误 \".concat(data.last_error.code, \": \").concat(data.last_error.msg);\n                                            onChunk(errorMsg);\n                                            isDone = true;\n                                            if (onComplete) onComplete();\n                                            break;\n                                        }\n                                        // 处理对话内容响应\n                                        if (data.choices && data.choices.length > 0 && data.choices[0].delta && data.choices[0].delta.content) {\n                                            // 处理官方标准格式（choices.delta.content）\n                                            onChunk(data.choices[0].delta.content);\n                                            hasReceivedContent = true;\n                                            hasProcessedValidData = true;\n                                        } else if (data.content) {\n                                            // 处理兼容格式（content字段）\n                                            onChunk(data.content);\n                                            hasReceivedContent = true;\n                                            hasProcessedValidData = true;\n                                        }\n                                        // 检查响应是否包含完成标志\n                                        if (data.done || data.choices && data.choices.length > 0 && data.choices[0].finish_reason === \"stop\") {\n                                            console.log(\"响应数据包含完成标记\");\n                                            isDone = true;\n                                            if (onComplete) onComplete(); // 通知前端响应已完成\n                                            break;\n                                        }\n                                    } catch (e) {\n                                        console.warn(\"解析JSON数据出错:\", e);\n                                    }\n                                } else if (line.trim().length > 0) {\n                                    // 如果不是data:开头但有内容，可能是直接的文本\n                                    console.log(\"收到非SSE格式数据，尝试直接处理:\", line);\n                                    // 尝试作为JSON解析\n                                    try {\n                                        const data = JSON.parse(line);\n                                        if (data.content) {\n                                            onChunk(data.content);\n                                            hasReceivedContent = true;\n                                            hasProcessedValidData = true;\n                                        }\n                                    } catch (e) {\n                                        // 不是JSON，直接作为文本内容处理\n                                        onChunk(line);\n                                        hasReceivedContent = true;\n                                        hasProcessedValidData = true;\n                                    }\n                                }\n                            } catch (e) {\n                                console.warn(\"处理行数据出错:\", e);\n                            }\n                        }\n                        // 如果没有从标准格式中提取到数据，尝试其他格式\n                        if (!hasProcessedValidData && chunk.trim().length > 0) {\n                            console.log(\"尝试处理非标准格式的整块数据\");\n                            // 3. 尝试整个数据块作为JSON\n                            try {\n                                const data = JSON.parse(chunk.trim());\n                                if (data.content) {\n                                    onChunk(data.content);\n                                    hasReceivedContent = true;\n                                }\n                                if (data.text) {\n                                    onChunk(data.text);\n                                    hasReceivedContent = true;\n                                }\n                                if (data.done) {\n                                    isDone = true;\n                                    if (onComplete) onComplete();\n                                }\n                            } catch (e) {\n                                // 4. 如果不是JSON，可能是纯文本内容\n                                if (chunk.trim().length > 0 && !chunk.includes(\"data:\")) {\n                                    console.log(\"作为纯文本内容处理\");\n                                    onChunk(chunk.trim());\n                                    hasReceivedContent = true;\n                                }\n                            }\n                        }\n                    } catch (error) {\n                        console.error(\"解析流数据块出错:\", error);\n                    }\n                }\n                // 如果流结束但没收到任何内容，发送一个默认消息\n                if (!hasReceivedContent) {\n                    console.log(\"未收到任何内容，发送默认消息\");\n                    onChunk(\"我没有收到有效的回复。请稍后再试。\");\n                }\n                // 流处理完成\n                console.log(\"流处理完成\");\n                if (onComplete) onComplete();\n            } catch (error) {\n                console.error(\"读取流出错:\", error);\n                if (error.name === \"AbortError\") {\n                    console.log(\"请求被中断\");\n                } else {\n                    console.error(\"读取流出错:\", error);\n                    onChunk(ERROR_MESSAGES.STREAM);\n                }\n                if (!hasReceivedContent) {\n                    onChunk(\"处理响应时出错，请稍后再试。\");\n                }\n                if (onComplete) onComplete(); // 通知前端响应已完成（出错）\n            }\n        };\n        // 开始处理流\n        processStream();\n        // 返回清理函数\n        return ()=>{\n            controller.abort();\n            if (onComplete) onComplete(); // 确保取消请求时也通知完成\n        };\n    } catch (error) {\n        console.error(\"请求错误:\", error);\n        if (error.name === \"AbortError\") {\n            console.log(\"请求被中断\");\n        } else {\n            onChunk(ERROR_MESSAGES.NETWORK);\n        }\n        if (onComplete) onComplete(); // 通知前端响应已完成（出错）\n        return ()=>controller.abort();\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9zZXJ2aWNlcy9jb3plU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7OztDQUdDLEdBSUQsT0FBTztBQUNQLE1BQU1BLGlCQUFpQjtJQUNyQkMsU0FBUztJQUNUQyxRQUFRO0lBQ1JDLFNBQVM7SUFDVEMsUUFBUTtJQUNSQyxpQkFBaUI7SUFDakJDLGdCQUFnQjtJQUNoQkMsaUJBQWlCO0lBQ2pCQyxxQkFBcUI7QUFDdkI7QUFFQSxTQUFTO0FBQ1QsTUFBTUMsY0FBYztJQUNsQixzQ0FBc0M7SUFDdENDLHFCQUFxQixLQUFrQixHQUFjQyxPQUFPQyw0QkFBNEIsR0FBRyxDQUFJO0FBQ2pHO0FBRUE7Ozs7Q0FJQyxHQUNELE1BQU1DLHFCQUFxQixDQUFDQztJQUMxQixJQUFJLENBQUNBLFNBQVNBLE1BQU1DLE1BQU0sS0FBSyxHQUFHLE9BQU8sRUFBRTtJQUUzQyxPQUFPRCxNQUFNRSxHQUFHLENBQUMsQ0FBQ0MsT0FBVTtZQUMxQkMsTUFBTUQsS0FBS0MsSUFBSSxDQUFDQyxXQUFXO1lBQzNCQyxLQUFLSCxLQUFLRyxHQUFHO1FBRWY7QUFDRjtBQUVBOzs7Ozs7OztDQVFDLEdBQ00sTUFBTUMsb0JBQW9CLGVBQy9CQztRQUNBUix5RUFBd0IsRUFBRSxFQUMxQlMsd0RBQ0FDO0lBRUEsMEJBQTBCO0lBQzFCLE1BQU1DLGFBQWEsSUFBSUM7SUFDdkIsTUFBTUMsU0FBU0YsV0FBV0UsTUFBTTtJQUVoQyxJQUFJO1FBQ0Ysa0NBQWtDO1FBQ2xDLE1BQU1DLGNBQWM7WUFDbEJDLFNBQVMsVUFBVUMsS0FBS0MsR0FBRztZQUMzQkMsVUFBVTtnQkFDUjtvQkFDRUMsTUFBTTtvQkFDTkMsU0FBU1o7b0JBQ1Qsa0JBQWtCO29CQUNsQixHQUFJUixNQUFNQyxNQUFNLEdBQUcsS0FBSzt3QkFBRUQsT0FBT0QsbUJBQW1CQztvQkFBTyxDQUFDO2dCQUM5RDthQUNEO1lBQ0RxQixRQUFRO1lBQ1IsZ0JBQWdCO1lBQ2hCLEdB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QUssQ0FBQyxTQUFTQTtRQUN2QixJQUFJQSxNQUFNb0MsSUFBSSxLQUFLLGNBQWM7WUFDL0JwRCxRQUFRQyxHQUFHLENBQUM7UUFDZCxPQUFPO1lBQ0xmLFFBQVF2QixlQUFlQyxPQUFPO1FBQ2hDO1FBQ0EsSUFBSXVCLFlBQVlBLGNBQWMsZ0JBQWdCO1FBQzlDLE9BQU8sSUFBTUMsV0FBVzZCLEtBQUs7SUFDL0I7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9zZXJ2aWNlcy9jb3plU2VydmljZS50cz81ZjFjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBjb3plU2VydmljZS50c1xyXG4gKiBDb3plIEFQSeacjeWKoSAtIOWkhOeQhuS4jkNvemUgQVBJ55qE6YCa5L+hXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTWVkaWFDb250ZW50LCBMTE1SZXNwb25zZSB9IGZyb20gXCJAL3R5cGVzL2NoYXRcIjtcclxuXHJcbi8vIOmUmeivr+a2iOaBr1xyXG5jb25zdCBFUlJPUl9NRVNTQUdFUyA9IHtcclxuICBORVRXT1JLOiBcIue9kee7nOi/nuaOpeWksei0pe+8jOivt+ajgOafpeaCqOeahOe9kee7nOi/nuaOpeOAglwiLFxyXG4gIFNFUlZFUjogXCLmnI3liqHlmajlpITnkIbor7fmsYLlpLHotKXvvIzor7fnqI3lkI7ph43or5XjgIJcIixcclxuICBHRU5FUkFMOiBcIuWPkemAgea2iOaBr+aXtuWHuueOsOmUmeivr++8jOivt+eojeWQjumHjeivleOAglwiLFxyXG4gIFNUUkVBTTogXCLmtYHlvI/lk43lupTkuK3mlq3vvIzor7fliLfmlrDpobXpnaLph43or5XjgIJcIixcclxuICBBUElfS0VZX01JU1NJTkc6IFwi57y65bCRQVBJ5a+G6ZKl77yM6K+35qOA5p+l546v5aKD6YWN572u44CCXCIsXHJcbiAgQk9UX0lEX01JU1NJTkc6IFwi57y65bCR5py65Zmo5Lq6SUTvvIzor7fmo4Dmn6Xnjq/looPphY3nva7jgIJcIixcclxuICBQQVJBTUVURVJfRVJST1I6IFwiQVBJ5Y+C5pWw6ZSZ6K+v77yM6K+36IGU57O75byA5Y+R5Lq65ZGY44CCXCIsXHJcbiAgU0hPUlRDVVRfSURfTUlTU0lORzogXCLnvLrlsJHlv6vmjbfmjIfku6RJRO+8jOivt+ajgOafpeeOr+Wig+mFjee9ruOAglwiLFxyXG59O1xyXG5cclxuLy8gQ296ZemFjee9rlxyXG5jb25zdCBDT1pFX0NPTkZJRyA9IHtcclxuICAvLyDlpoLmnpzmnInnjq/looPlj5jph4/liJnkvb/nlKjnjq/looPlj5jph4/vvIzlkKbliJnkvb/nlKjpu5jorqTlgLzvvIjlupTor6XlnKjov5DooYzml7booqvmraPnoa7orr7nva7vvIlcclxuICBTSE9SVENVVF9DT01NQU5EX0lEOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5FTlZfQ09aRV9TSE9SVENVVF9DT01NQU5EX0lEIDogbnVsbCxcclxufTtcclxuXHJcbi8qKlxyXG4gKiDmnoTlu7rlqpLkvZPlhoXlrrnkuLpDb3plIEFQSeWPr+aOpeWPl+eahOagvOW8j1xyXG4gKiBAcGFyYW0gbWVkaWEg5aqS5L2T5YaF5a655pWw57uEXHJcbiAqIEByZXR1cm5zIOi9rOaNouWQjueahENvemXmoLzlvI/lqpLkvZPlhoXlrrlcclxuICovXHJcbmNvbnN0IGZvcm1hdE1lZGlhQ29udGVudCA9IChtZWRpYTogTWVkaWFDb250ZW50W10pID0+IHtcclxuICBpZiAoIW1lZGlhIHx8IG1lZGlhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xyXG5cclxuICByZXR1cm4gbWVkaWEubWFwKChpdGVtKSA9PiAoe1xyXG4gICAgdHlwZTogaXRlbS50eXBlLnRvTG93ZXJDYXNlKCksXHJcbiAgICB1cmw6IGl0ZW0udXJsLFxyXG4gICAgLy8g5qC55o2uQ296ZSBBUEnnmoTopoHmsYLlj6/og73pnIDopoHmt7vliqDlhbbku5blrZfmrrVcclxuICB9KSk7XHJcbn07XHJcblxyXG4vKipcclxuICog5Y+R6YCB5raI5oGv5YiwQ296ZSBBUEnlubbojrflj5bmtYHlvI/lk43lupQgKOmAmui/h+acrOWcsEFQSeS7o+eQhilcclxuICpcclxuICogQHBhcmFtIG1lc3NhZ2Ug55So5oi35raI5oGv5YaF5a65XHJcbiAqIEBwYXJhbSBtZWRpYSDlqpLkvZPlhoXlrrnmlbDnu4RcclxuICogQHBhcmFtIG9uQ2h1bmsg5o6l5pS25pWw5o2u5Z2X55qE5Zue6LCD5Ye95pWwXHJcbiAqIEBwYXJhbSBvbkNvbXBsZXRlIOWTjeW6lOWujOaIkOeahOWbnuiwg+WHveaVsFxyXG4gKiBAcmV0dXJucyDmuIXnkIblh73mlbDvvIznlKjkuo7kuK3mlq3or7fmsYJcclxuICovXHJcbmV4cG9ydCBjb25zdCBzZW5kTWVzc2FnZVRvQ296ZSA9IGFzeW5jIChcclxuICBtZXNzYWdlOiBzdHJpbmcsXHJcbiAgbWVkaWE6IE1lZGlhQ29udGVudFtdID0gW10sXHJcbiAgb25DaHVuazogKGNodW5rOiBzdHJpbmcpID0+IHZvaWQsXHJcbiAgb25Db21wbGV0ZT86ICgpID0+IHZvaWRcclxuKTogUHJvbWlzZTwoKSA9PiB2b2lkPiA9PiB7XHJcbiAgLy8g5Yib5bu6QWJvcnRDb250cm9sbGVy55So5LqO5Lit5pat6K+35rGCXHJcbiAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICBjb25zdCBzaWduYWwgPSBjb250cm9sbGVyLnNpZ25hbDtcclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIOaehOW7uuivt+axguS9kyAtIOS9v+eUqOacrOWcsEFQSeS7o+eQhu+8jOmAgumFjUNvemUgQVBJIHYzXHJcbiAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcclxuICAgICAgdXNlcl9pZDogXCJ1c2VyX1wiICsgRGF0ZS5ub3coKSwgLy8g55Sf5oiQ5LiA5Liq5ZSv5LiA55qE55So5oi3SURcclxuICAgICAgbWVzc2FnZXM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICByb2xlOiBcInVzZXJcIixcclxuICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAvLyDlpoLmnpzmnInlqpLkvZPlhoXlrrnvvIzliJnmt7vliqDliLDor7fmsYLkuK1cclxuICAgICAgICAgIC4uLihtZWRpYS5sZW5ndGggPiAwICYmIHsgbWVkaWE6IGZvcm1hdE1lZGlhQ29udGVudChtZWRpYSkgfSksXHJcbiAgICAgICAgfSxcclxuICAgICAgXSxcclxuICAgICAgc3RyZWFtOiB0cnVlLCAvLyDlkK/nlKjmtYHlvI/lk43lupRcclxuICAgICAgLy8g5re75Yqg5b+r5o235oyH5LukSUTvvIjlpoLmnpzmnInvvIlcclxuICAgICAgLi4uKENPWkVfQ09ORklHLlNIT1JUQ1VUX0NPTU1BTkRfSUQgJiYgeyBcclxuICAgICAgICBzaG9ydGN1dF9jb21tYW5kX2lkOiBDT1pFX0NPTkZJRy5TSE9SVENVVF9DT01NQU5EX0lEIFxyXG4gICAgICB9KSxcclxuICAgIH07XHJcblxyXG4gICAgY29uc29sZS5sb2coXCLlh4blpIflj5HpgIHor7fmsYLliLDmnKzlnLBBUEnku6PnkIY6XCIsIFwiL2FwaS9jaGF0XCIpO1xyXG4gICAgY29uc29sZS5sb2coXCLor7fmsYLkvZM6XCIsIEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSk7XHJcblxyXG4gICAgLy8g5Y+R6YCB6K+35rGC5Yiw5pys5ZywQVBJ5Luj55CGXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2FwaS9jaGF0XCIsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXHJcbiAgICAgIHNpZ25hbCxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFwiQVBJ5ZON5bqU54q25oCBOlwiLCByZXNwb25zZS5zdGF0dXMpO1xyXG4gICAgY29uc29sZS5sb2coXCJBUEnlk43lupTlpLTpg6g6XCIsIE9iamVjdC5mcm9tRW50cmllcyhyZXNwb25zZS5oZWFkZXJzLmVudHJpZXMoKSkpO1xyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiQVBJ6ZSZ6K+vOlwiLCByZXNwb25zZS5zdGF0dXMsIGVycm9yVGV4dCk7XHJcbiAgICAgIG9uQ2h1bmsoYOacjeWKoeWZqOi/lOWbnumUmeivrzogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgIGlmIChvbkNvbXBsZXRlKSBvbkNvbXBsZXRlKCk7IC8vIOmAmuefpeWujOaIkO+8iOWHuumUme+8iVxyXG4gICAgICByZXR1cm4gKCkgPT4gY29udHJvbGxlci5hYm9ydCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOajgOafpeWTjeW6lOaYr+WQpuaUr+aMgea1geW8j+S8oOi+k1xyXG4gICAgaWYgKCFyZXNwb25zZS5ib2R5KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLlk43lupTkuI3mlK/mjIHmtYHlvI/kvKDovpNcIik7XHJcbiAgICAgIG9uQ2h1bmsoRVJST1JfTUVTU0FHRVMuU1RSRUFNKTtcclxuICAgICAgaWYgKG9uQ29tcGxldGUpIG9uQ29tcGxldGUoKTsgLy8g6YCa55+l5a6M5oiQ77yI5Ye66ZSZ77yJXHJcbiAgICAgIHJldHVybiAoKSA9PiBjb250cm9sbGVyLmFib3J0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5aSE55CG5rWB5byP5ZON5bqUXHJcbiAgICBjb25zdCByZWFkZXIgPSByZXNwb25zZS5ib2R5LmdldFJlYWRlcigpO1xyXG4gICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFwi5byA5aeL5aSE55CG5rWB5byP5ZON5bqUXCIpO1xyXG5cclxuICAgIC8vIOiusOW9leaUtuWIsOeahOaAu+WGheWuue+8iOeUqOS6juiwg+ivle+8iVxyXG4gICAgbGV0IHJlY2VpdmVkQ29udGVudCA9IFwiXCI7XHJcbiAgICBsZXQgaGFzUmVjZWl2ZWRDb250ZW50ID0gZmFsc2U7XHJcblxyXG4gICAgLy8g5byC5q2l5aSE55CG5rWB5pWw5o2uXHJcbiAgICBjb25zdCBwcm9jZXNzU3RyZWFtID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGxldCBpc0RvbmUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgd2hpbGUgKCFpc0RvbmUpIHtcclxuICAgICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XHJcblxyXG4gICAgICAgICAgaWYgKGRvbmUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCLmtYHlvI/lk43lupTlrozmiJDvvIjor7vlj5blmajov5Tlm55kb25l77yJXCIpO1xyXG4gICAgICAgICAgICBpZiAoIWhhc1JlY2VpdmVkQ29udGVudCkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5pW05Liq5ZON5bqU6L+H56iL5Lit5pyq5pS25Yiw5Lu75L2V5pyJ5pWI5YaF5a65XCIpO1xyXG4gICAgICAgICAgICAgIG9uQ2h1bmsoXCLmirHmrYnvvIzmnI3liqHlmajmsqHmnInov5Tlm57mnInmlYjlm57lpI3jgIJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUpIG9uQ29tcGxldGUoKTsgLy8g6YCa55+l5YmN56uv5ZON5bqU5bey5a6M5oiQXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIOino+eggeS6jOi/m+WItuaVsOaNrlxyXG4gICAgICAgICAgY29uc3QgY2h1bmsgPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIuaUtuWIsOaVsOaNruWdl+WOn+Wni+WGheWuuTpcIiwgY2h1bmspO1xyXG4gICAgICAgICAgcmVjZWl2ZWRDb250ZW50ICs9IGNodW5rO1xyXG5cclxuICAgICAgICAgIC8vIOWwneivleS4jeWQjOeahOino+aekOaWueW8j+WkhOeQhlNTReagvOW8j+eahOaVsOaNrlxyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gMS4g6aaW5YWI5bCd6K+V5qCH5YeG55qEU1NF5qC85byP6Kej5p6Q77yIZGF0YTogey4uLn0g5qC85byP77yJXHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gY2h1bmtcclxuICAgICAgICAgICAgICAuc3BsaXQoXCJcXG5cIilcclxuICAgICAgICAgICAgICAuZmlsdGVyKChsaW5lKSA9PiBsaW5lLnRyaW0oKSAhPT0gXCJcIik7XHJcblxyXG4gICAgICAgICAgICBsZXQgaGFzUHJvY2Vzc2VkVmFsaWREYXRhID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWkhOeQhuihjDpcIiwgbGluZSk7XHJcblxyXG4gICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyDmo4Dmn6XmmK/lkKbkuLpTU0XmoLzlvI9cclxuICAgICAgICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoXCJkYXRhOlwiKSkge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBqc29uU3RyID0gbGluZS5zdWJzdHJpbmcoNSkudHJpbSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5Li6W0RPTkVd5qCH6K6wXHJcbiAgICAgICAgICAgICAgICAgIGlmIChqc29uU3RyID09PSBcIltET05FXVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmlLbliLBbRE9ORV3moIforrDvvIzlk43lupTnu5PmnZ9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNEb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob25Db21wbGV0ZSkgb25Db21wbGV0ZSgpOyAvLyDpgJrnn6XliY3nq6/lk43lupTlt7LlrozmiJBcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgLy8g5bCd6K+V6Kej5p6QSlNPTuaVsOaNrlxyXG4gICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGpzb25TdHIpIGFzIExMTVJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6Kej5p6Q5YiwSlNPTuaVsOaNrjpcIiwgZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOajgOafpeaYr+WQpuaciemUmeivr+S/oeaBr1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gXCJmYWlsZWRcIiAmJiBkYXRhLmxhc3RfZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb3plIEFQSei/lOWbnumUmeivrzpcIiwgZGF0YS5sYXN0X2Vycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5sYXN0X2Vycm9yLmNvZGUgPT09IDQwMDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGAke0VSUk9SX01FU1NBR0VTLlBBUkFNRVRFUl9FUlJPUn3vvIjplJnor6/noIHvvJoke2RhdGEubGFzdF9lcnJvci5jb2Rlfe+8jOS/oeaBr++8miR7ZGF0YS5sYXN0X2Vycm9yLm1zZ33vvIlgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBg6ZSZ6K+vICR7ZGF0YS5sYXN0X2Vycm9yLmNvZGV9OiAke2RhdGEubGFzdF9lcnJvci5tc2d9YDtcclxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2h1bmsoZXJyb3JNc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaXNEb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlKSBvbkNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhuWvueivneWGheWuueWTjeW6lFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgIGRhdGEuY2hvaWNlcyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS5jaG9pY2VzLmxlbmd0aCA+IDAgJiZcclxuICAgICAgICAgICAgICAgICAgICAgIGRhdGEuY2hvaWNlc1swXS5kZWx0YSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS5jaG9pY2VzWzBdLmRlbHRhLmNvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIOWkhOeQhuWumOaWueagh+WHhuagvOW8j++8iGNob2ljZXMuZGVsdGEuY29udGVudO+8iVxyXG4gICAgICAgICAgICAgICAgICAgICAgb25DaHVuayhkYXRhLmNob2ljZXNbMF0uZGVsdGEuY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBoYXNSZWNlaXZlZENvbnRlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaGFzUHJvY2Vzc2VkVmFsaWREYXRhID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuY29udGVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CG5YW85a655qC85byP77yIY29udGVudOWtl+aute+8iVxyXG4gICAgICAgICAgICAgICAgICAgICAgb25DaHVuayhkYXRhLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaGFzUmVjZWl2ZWRDb250ZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgIGhhc1Byb2Nlc3NlZFZhbGlkRGF0YSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyDmo4Dmn6Xlk43lupTmmK/lkKbljIXlkKvlrozmiJDmoIflv5dcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLmRvbmUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgIChkYXRhLmNob2ljZXMgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5jaG9pY2VzLmxlbmd0aCA+IDAgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5jaG9pY2VzWzBdLmZpbmlzaF9yZWFzb24gPT09IFwic3RvcFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLlk43lupTmlbDmja7ljIXlkKvlrozmiJDmoIforrBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpc0RvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUpIG9uQ29tcGxldGUoKTsgLy8g6YCa55+l5YmN56uv5ZON5bqU5bey5a6M5oiQXHJcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCLop6PmnpBKU09O5pWw5o2u5Ye66ZSZOlwiLCBlKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gMi4g5bCd6K+V6Kej5p6Q6Z2e5qCH5YeG5qC85byP77yI5Y+v6IO95piv55u05o6l55qE5paH5pys5YaF5a6577yJXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChsaW5lLnRyaW0oKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIOWmguaenOS4jeaYr2RhdGE65byA5aS05L2G5pyJ5YaF5a6577yM5Y+v6IO95piv55u05o6l55qE5paH5pysXHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5pS25Yiw6Z2eU1NF5qC85byP5pWw5o2u77yM5bCd6K+V55u05o6l5aSE55CGOlwiLCBsaW5lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgIC8vIOWwneivleS9nOS4ukpTT07op6PmnpBcclxuICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShsaW5lKSBhcyBhbnk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY29udGVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgb25DaHVuayhkYXRhLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaGFzUmVjZWl2ZWRDb250ZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgIGhhc1Byb2Nlc3NlZFZhbGlkRGF0YSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5LiN5pivSlNPTu+8jOebtOaOpeS9nOS4uuaWh+acrOWGheWuueWkhOeQhlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2h1bmsobGluZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzUmVjZWl2ZWRDb250ZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBoYXNQcm9jZXNzZWRWYWxpZERhdGEgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwi5aSE55CG6KGM5pWw5o2u5Ye66ZSZOlwiLCBlKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOWmguaenOayoeacieS7juagh+WHhuagvOW8j+S4reaPkOWPluWIsOaVsOaNru+8jOWwneivleWFtuS7luagvOW8j1xyXG4gICAgICAgICAgICBpZiAoIWhhc1Byb2Nlc3NlZFZhbGlkRGF0YSAmJiBjaHVuay50cmltKCkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5bCd6K+V5aSE55CG6Z2e5qCH5YeG5qC85byP55qE5pW05Z2X5pWw5o2uXCIpO1xyXG5cclxuICAgICAgICAgICAgICAvLyAzLiDlsJ3or5XmlbTkuKrmlbDmja7lnZfkvZzkuLpKU09OXHJcbiAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGNodW5rLnRyaW0oKSkgYXMgYW55O1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuY29udGVudCkge1xyXG4gICAgICAgICAgICAgICAgICBvbkNodW5rKGRhdGEuY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgIGhhc1JlY2VpdmVkQ29udGVudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS50ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2h1bmsoZGF0YS50ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgaGFzUmVjZWl2ZWRDb250ZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRvbmUpIHtcclxuICAgICAgICAgICAgICAgICAgaXNEb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUpIG9uQ29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyA0LiDlpoLmnpzkuI3mmK9KU09O77yM5Y+v6IO95piv57qv5paH5pys5YaF5a65XHJcbiAgICAgICAgICAgICAgICBpZiAoY2h1bmsudHJpbSgpLmxlbmd0aCA+IDAgJiYgIWNodW5rLmluY2x1ZGVzKFwiZGF0YTpcIikpIHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLkvZzkuLrnuq/mlofmnKzlhoXlrrnlpITnkIZcIik7XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2h1bmsoY2h1bmsudHJpbSgpKTtcclxuICAgICAgICAgICAgICAgICAgaGFzUmVjZWl2ZWRDb250ZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLop6PmnpDmtYHmlbDmja7lnZflh7rplJk6XCIsIGVycm9yKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOWmguaenOa1gee7k+adn+S9huayoeaUtuWIsOS7u+S9leWGheWuue+8jOWPkemAgeS4gOS4qum7mOiupOa2iOaBr1xyXG4gICAgICAgIGlmICghaGFzUmVjZWl2ZWRDb250ZW50KSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIuacquaUtuWIsOS7u+S9leWGheWuue+8jOWPkemAgem7mOiupOa2iOaBr1wiKTtcclxuICAgICAgICAgIG9uQ2h1bmsoXCLmiJHmsqHmnInmlLbliLDmnInmlYjnmoTlm57lpI3jgILor7fnqI3lkI7lho3or5XjgIJcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDmtYHlpITnkIblrozmiJBcclxuICAgICAgICBjb25zb2xlLmxvZyhcIua1geWkhOeQhuWujOaIkFwiKTtcclxuICAgICAgICBpZiAob25Db21wbGV0ZSkgb25Db21wbGV0ZSgpO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLor7vlj5bmtYHlh7rplJk6XCIsIGVycm9yKTtcclxuXHJcbiAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIuivt+axguiiq+S4reaWrVwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIuivu+WPlua1geWHuumUmTpcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgb25DaHVuayhFUlJPUl9NRVNTQUdFUy5TVFJFQU0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFoYXNSZWNlaXZlZENvbnRlbnQpIHtcclxuICAgICAgICAgIG9uQ2h1bmsoXCLlpITnkIblk43lupTml7blh7rplJnvvIzor7fnqI3lkI7lho3or5XjgIJcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAob25Db21wbGV0ZSkgb25Db21wbGV0ZSgpOyAvLyDpgJrnn6XliY3nq6/lk43lupTlt7LlrozmiJDvvIjlh7rplJnvvIlcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyDlvIDlp4vlpITnkIbmtYFcclxuICAgIHByb2Nlc3NTdHJlYW0oKTtcclxuXHJcbiAgICAvLyDov5Tlm57muIXnkIblh73mlbBcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcclxuICAgICAgaWYgKG9uQ29tcGxldGUpIG9uQ29tcGxldGUoKTsgLy8g56Gu5L+d5Y+W5raI6K+35rGC5pe25Lmf6YCa55+l5a6M5oiQXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwi6K+35rGC6ZSZ6K+vOlwiLCBlcnJvcik7XHJcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gXCJBYm9ydEVycm9yXCIpIHtcclxuICAgICAgY29uc29sZS5sb2coXCLor7fmsYLooqvkuK3mlq1cIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvbkNodW5rKEVSUk9SX01FU1NBR0VTLk5FVFdPUkspO1xyXG4gICAgfVxyXG4gICAgaWYgKG9uQ29tcGxldGUpIG9uQ29tcGxldGUoKTsgLy8g6YCa55+l5YmN56uv5ZON5bqU5bey5a6M5oiQ77yI5Ye66ZSZ77yJXHJcbiAgICByZXR1cm4gKCkgPT4gY29udHJvbGxlci5hYm9ydCgpO1xyXG4gIH1cclxufTtcclxuIl0sIm5hbWVzIjpbIkVSUk9SX01FU1NBR0VTIiwiTkVUV09SSyIsIlNFUlZFUiIsIkdFTkVSQUwiLCJTVFJFQU0iLCJBUElfS0VZX01JU1NJTkciLCJCT1RfSURfTUlTU0lORyIsIlBBUkFNRVRFUl9FUlJPUiIsIlNIT1JUQ1VUX0lEX01JU1NJTkciLCJDT1pFX0NPTkZJRyIsIlNIT1JUQ1VUX0NPTU1BTkRfSUQiLCJ3aW5kb3ciLCJFTlZfQ09aRV9TSE9SVENVVF9DT01NQU5EX0lEIiwiZm9ybWF0TWVkaWFDb250ZW50IiwibWVkaWEiLCJsZW5ndGgiLCJtYXAiLCJpdGVtIiwidHlwZSIsInRvTG93ZXJDYXNlIiwidXJsIiwic2VuZE1lc3NhZ2VUb0NvemUiLCJtZXNzYWdlIiwib25DaHVuayIsIm9uQ29tcGxldGUiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwic2lnbmFsIiwicmVxdWVzdEJvZHkiLCJ1c2VyX2lkIiwiRGF0ZSIsIm5vdyIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJzdHJlYW0iLCJzaG9ydGN1dF9jb21tYW5kX2lkIiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJzdGF0dXMiLCJPYmplY3QiLCJmcm9tRW50cmllcyIsImVudHJpZXMiLCJvayIsImVycm9yVGV4dCIsInRleHQiLCJlcnJvciIsImFib3J0IiwicmVhZGVyIiwiZ2V0UmVhZGVyIiwiZGVjb2RlciIsIlRleHREZWNvZGVyIiwicmVjZWl2ZWRDb250ZW50IiwiaGFzUmVjZWl2ZWRDb250ZW50IiwicHJvY2Vzc1N0cmVhbSIsImlzRG9uZSIsImRvbmUiLCJ2YWx1ZSIsInJlYWQiLCJjaHVuayIsImRlY29kZSIsImxpbmVzIiwic3BsaXQiLCJmaWx0ZXIiLCJsaW5lIiwidHJpbSIsImhhc1Byb2Nlc3NlZFZhbGlkRGF0YSIsInN0YXJ0c1dpdGgiLCJqc29uU3RyIiwic3Vic3RyaW5nIiwiZGF0YSIsInBhcnNlIiwibGFzdF9lcnJvciIsImVycm9yTXNnIiwiY29kZSIsIm1zZyIsImNob2ljZXMiLCJkZWx0YSIsImZpbmlzaF9yZWFzb24iLCJlIiwid2FybiIsImluY2x1ZGVzIiwibmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/services/cozeService.ts\n"));

/***/ })

});