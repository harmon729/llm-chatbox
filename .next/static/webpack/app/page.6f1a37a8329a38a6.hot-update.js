"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/services/cozeService.ts":
/*!*************************************!*\
  !*** ./src/services/cozeService.ts ***!
  \*************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendMessageToCoze: function() { return /* binding */ sendMessageToCoze; }\n/* harmony export */ });\n/**\r\n * cozeService.ts\r\n * Coze API服务 - 处理与Coze API的通信\r\n */ // 错误消息\nconst ERROR_MESSAGES = {\n    NETWORK: \"网络连接失败，请检查您的网络连接。\",\n    SERVER: \"服务器处理请求失败，请稍后重试。\",\n    GENERAL: \"发送消息时出现错误，请稍后重试。\",\n    STREAM: \"流式响应中断，请刷新页面重试。\",\n    API_KEY_MISSING: \"缺少API密钥，请检查环境配置。\",\n    BOT_ID_MISSING: \"缺少机器人ID，请检查环境配置。\",\n    PARAMETER_ERROR: \"API参数错误，请联系开发人员。\"\n};\n/**\r\n * 构建媒体内容为Coze API可接受的格式\r\n * @param media 媒体内容数组\r\n * @returns 转换后的Coze格式媒体内容\r\n */ const formatMediaContent = (media)=>{\n    if (!media || media.length === 0) return [];\n    return media.map((item)=>({\n            type: item.type.toLowerCase(),\n            url: item.url\n        }));\n};\n/**\r\n * 发送消息到Coze API并获取流式响应 (通过本地API代理)\r\n *\r\n * @param message 用户消息内容\r\n * @param media 媒体内容数组\r\n * @param onChunk 接收数据块的回调函数\r\n * @param onComplete 响应完成的回调函数\r\n * @returns 清理函数，用于中断请求\r\n */ const sendMessageToCoze = async function(message) {\n    let media = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [], onChunk = arguments.length > 2 ? arguments[2] : void 0, onComplete = arguments.length > 3 ? arguments[3] : void 0;\n    // 创建AbortController用于中断请求\n    const controller = new AbortController();\n    const signal = controller.signal;\n    try {\n        // 构建请求体 - 使用本地API代理，适配Coze API v3\n        const requestBody = {\n            user_id: \"user_\" + Date.now(),\n            messages: [\n                {\n                    role: \"user\",\n                    content: message,\n                    // 如果有媒体内容，则添加到请求中\n                    ...media.length > 0 && {\n                        media: formatMediaContent(media)\n                    }\n                }\n            ],\n            stream: true,\n            auto_save_history: true\n        };\n        console.log(\"准备发送请求到本地API代理:\", \"/api/chat\");\n        console.log(\"请求体:\", JSON.stringify(requestBody));\n        // 发送请求到本地API代理\n        const response = await fetch(\"/api/chat\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(requestBody),\n            signal\n        });\n        console.log(\"API响应状态:\", response.status);\n        console.log(\"API响应头部:\", Object.fromEntries(response.headers.entries()));\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(\"API错误:\", response.status, errorText);\n            onChunk(\"服务器返回错误: \".concat(response.status));\n            if (onComplete) onComplete(); // 通知完成（出错）\n            return ()=>controller.abort();\n        }\n        // 检查响应是否支持流式传输\n        if (!response.body) {\n            console.error(\"响应不支持流式传输\");\n            onChunk(ERROR_MESSAGES.STREAM);\n            if (onComplete) onComplete(); // 通知完成（出错）\n            return ()=>controller.abort();\n        }\n        // 处理流式响应\n        const reader = response.body.getReader();\n        const decoder = new TextDecoder();\n        console.log(\"开始处理流式响应\");\n        // 记录收到的总内容（用于调试）\n        let receivedContent = \"\";\n        let hasReceivedContent = false;\n        // 异步处理流数据\n        const processStream = async ()=>{\n            try {\n                let isDone = false;\n                while(!isDone){\n                    const { done, value } = await reader.read();\n                    if (done) {\n                        console.log(\"流式响应完成（读取器返回done）\");\n                        if (!hasReceivedContent) {\n                            console.log(\"整个响应过程中未收到任何有效内容\");\n                            onChunk(\"抱歉，服务器没有返回有效回复。\");\n                        }\n                        if (onComplete) onComplete(); // 通知前端响应已完成\n                        break;\n                    }\n                    // 解码二进制数据\n                    const chunk = decoder.decode(value, {\n                        stream: true\n                    });\n                    console.log(\"收到数据块原始内容:\", chunk);\n                    receivedContent += chunk;\n                    // 尝试不同的解析方式处理SSE格式的数据\n                    try {\n                        // 1. 首先尝试标准的SSE格式解析（data: {...} 格式）\n                        const lines = chunk.split(\"\\n\").filter((line)=>line.trim() !== \"\");\n                        let hasProcessedValidData = false;\n                        for (const line of lines){\n                            console.log(\"处理行:\", line);\n                            try {\n                                // 检查是否为SSE格式\n                                if (line.startsWith(\"data:\")) {\n                                    const jsonStr = line.substring(5).trim();\n                                    // 检查是否为[DONE]标记\n                                    if (jsonStr === \"[DONE]\") {\n                                        console.log(\"收到[DONE]标记，响应结束\");\n                                        isDone = true;\n                                        if (onComplete) onComplete(); // 通知前端响应已完成\n                                        break;\n                                    }\n                                    // 尝试解析JSON数据\n                                    try {\n                                        const data = JSON.parse(jsonStr);\n                                        console.log(\"解析到JSON数据:\", data);\n                                        // 检查是否有错误信息\n                                        if (data.status === \"failed\" && data.last_error) {\n                                            console.error(\"Coze API返回错误:\", data.last_error);\n                                            const errorMsg = data.last_error.code === 4000 ? \"\".concat(ERROR_MESSAGES.PARAMETER_ERROR, \"（错误码：\").concat(data.last_error.code, \"，信息：\").concat(data.last_error.msg, \"）\") : \"错误 \".concat(data.last_error.code, \": \").concat(data.last_error.msg);\n                                            onChunk(errorMsg);\n                                            isDone = true;\n                                            if (onComplete) onComplete();\n                                            break;\n                                        }\n                                        // 处理对话内容响应\n                                        if (data.choices && data.choices.length > 0 && data.choices[0].delta && data.choices[0].delta.content) {\n                                            // 处理官方标准格式（choices.delta.content）\n                                            onChunk(data.choices[0].delta.content);\n                                            hasReceivedContent = true;\n                                            hasProcessedValidData = true;\n                                        } else if (data.content) {\n                                            // 处理兼容格式（content字段）\n                                            onChunk(data.content);\n                                            hasReceivedContent = true;\n                                            hasProcessedValidData = true;\n                                        }\n                                        // 检查响应是否包含完成标志\n                                        if (data.done || data.choices && data.choices.length > 0 && data.choices[0].finish_reason === \"stop\") {\n                                            console.log(\"响应数据包含完成标记\");\n                                            isDone = true;\n                                            if (onComplete) onComplete(); // 通知前端响应已完成\n                                            break;\n                                        }\n                                    } catch (e) {\n                                        console.warn(\"解析JSON数据出错:\", e);\n                                    }\n                                } else if (line.trim().length > 0) {\n                                    // 如果不是data:开头但有内容，可能是直接的文本\n                                    console.log(\"收到非SSE格式数据，尝试直接处理:\", line);\n                                    // 尝试作为JSON解析\n                                    try {\n                                        const data = JSON.parse(line);\n                                        if (data.content) {\n                                            onChunk(data.content);\n                                            hasReceivedContent = true;\n                                            hasProcessedValidData = true;\n                                        }\n                                    } catch (e) {\n                                        // 不是JSON，直接作为文本内容处理\n                                        onChunk(line);\n                                        hasReceivedContent = true;\n                                        hasProcessedValidData = true;\n                                    }\n                                }\n                            } catch (e) {\n                                console.warn(\"处理行数据出错:\", e);\n                            }\n                        }\n                        // 如果没有从标准格式中提取到数据，尝试其他格式\n                        if (!hasProcessedValidData && chunk.trim().length > 0) {\n                            console.log(\"尝试处理非标准格式的整块数据\");\n                            // 3. 尝试整个数据块作为JSON\n                            try {\n                                const data = JSON.parse(chunk.trim());\n                                if (data.content) {\n                                    onChunk(data.content);\n                                    hasReceivedContent = true;\n                                }\n                                if (data.text) {\n                                    onChunk(data.text);\n                                    hasReceivedContent = true;\n                                }\n                                if (data.done) {\n                                    isDone = true;\n                                    if (onComplete) onComplete();\n                                }\n                            } catch (e) {\n                                // 4. 如果不是JSON，可能是纯文本内容\n                                if (chunk.trim().length > 0 && !chunk.includes(\"data:\")) {\n                                    console.log(\"作为纯文本内容处理\");\n                                    onChunk(chunk.trim());\n                                    hasReceivedContent = true;\n                                }\n                            }\n                        }\n                    } catch (error) {\n                        console.error(\"解析流数据块出错:\", error);\n                    }\n                }\n                // 如果流结束但没收到任何内容，发送一个默认消息\n                if (!hasReceivedContent) {\n                    console.log(\"未收到任何内容，发送默认消息\");\n                    onChunk(\"我没有收到有效的回复。请稍后再试。\");\n                }\n                // 流处理完成\n                console.log(\"流处理完成\");\n                if (onComplete) onComplete();\n            } catch (error) {\n                console.error(\"读取流出错:\", error);\n                if (error.name === \"AbortError\") {\n                    console.log(\"请求被中断\");\n                } else {\n                    console.error(\"读取流出错:\", error);\n                    onChunk(ERROR_MESSAGES.STREAM);\n                }\n                if (!hasReceivedContent) {\n                    onChunk(\"处理响应时出错，请稍后再试。\");\n                }\n                if (onComplete) onComplete(); // 通知前端响应已完成（出错）\n            }\n        };\n        // 开始处理流\n        processStream();\n        // 返回清理函数\n        return ()=>{\n            controller.abort();\n            if (onComplete) onComplete(); // 确保取消请求时也通知完成\n        };\n    } catch (error) {\n        console.error(\"请求错误:\", error);\n        if (error.name === \"AbortError\") {\n            console.log(\"请求被中断\");\n        } else {\n            onChunk(ERROR_MESSAGES.NETWORK);\n        }\n        if (onComplete) onComplete(); // 通知前端响应已完成（出错）\n        return ()=>controller.abort();\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9zZXJ2aWNlcy9jb3plU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7OztDQUdDLEdBSUQsT0FBTztBQUNQLE1BQU1BLGlCQUFpQjtJQUNyQkMsU0FBUztJQUNUQyxRQUFRO0lBQ1JDLFNBQVM7SUFDVEMsUUFBUTtJQUNSQyxpQkFBaUI7SUFDakJDLGdCQUFnQjtJQUNoQkMsaUJBQWlCO0FBQ25CO0FBRUE7Ozs7Q0FJQyxHQUNELE1BQU1DLHFCQUFxQixDQUFDQztJQUMxQixJQUFJLENBQUNBLFNBQVNBLE1BQU1DLE1BQU0sS0FBSyxHQUFHLE9BQU8sRUFBRTtJQUUzQyxPQUFPRCxNQUFNRSxHQUFHLENBQUMsQ0FBQ0MsT0FBVTtZQUMxQkMsTUFBTUQsS0FBS0MsSUFBSSxDQUFDQyxXQUFXO1lBQzNCQyxLQUFLSCxLQUFLRyxHQUFHO1FBRWY7QUFDRjtBQUVBOzs7Ozs7OztDQVFDLEdBQ00sTUFBTUMsb0JBQW9CLGVBQy9CQztRQUNBUix5RUFBd0IsRUFBRSxFQUMxQlMsd0RBQ0FDO0lBRUEsMEJBQTBCO0lBQzFCLE1BQU1DLGFBQWEsSUFBSUM7SUFDdkIsTUFBTUMsU0FBU0YsV0FBV0UsTUFBTTtJQUVoQyxJQUFJO1FBQ0Ysa0NBQWtDO1FBQ2xDLE1BQU1DLGNBQWM7WUFDbEJDLFNBQVMsVUFBVUMsS0FBS0MsR0FBRztZQUMzQkMsVUFBVTtnQkFDUjtvQkFDRUMsTUFBTTtvQkFDTkMsU0FBU1o7b0JBQ1Qsa0JBQWtCO29CQUNsQixHQUFJUixNQUFNQyxNQUFNLEdBQUcsS0FBSzt3QkFBRUQsT0FBT0QsbUJBQW1CQztvQkFBTyxDQUFDO2dCQUM5RDthQUNEO1lBQ0RxQixRQUFRO1lBQ1JDLG1CQUFtQjtRQUNyQjtRQUVBQyxRQUFRQyxHQUFHLENBQUMsbUJBQW1CO1FBQy9CRCxRQUFRQyxHQUFHLENBQUMsUUFBUUMsS0FBS0MsU0FBUyxDQUFDWjtRQUVuQyxlQUFlO1FBQ2YsTUFBTWEsV0FBVyxNQUFNQyxN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LEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL3NlcnZpY2VzL2NvemVTZXJ2aWNlLnRzPzVmMWMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIGNvemVTZXJ2aWNlLnRzXHJcbiAqIENvemUgQVBJ5pyN5YqhIC0g5aSE55CG5LiOQ296ZSBBUEnnmoTpgJrkv6FcclxuICovXHJcblxyXG5pbXBvcnQgeyBNZWRpYUNvbnRlbnQsIExMTVJlc3BvbnNlIH0gZnJvbSBcIkAvdHlwZXMvY2hhdFwiO1xyXG5cclxuLy8g6ZSZ6K+v5raI5oGvXHJcbmNvbnN0IEVSUk9SX01FU1NBR0VTID0ge1xyXG4gIE5FVFdPUks6IFwi572R57uc6L+e5o6l5aSx6LSl77yM6K+35qOA5p+l5oKo55qE572R57uc6L+e5o6l44CCXCIsXHJcbiAgU0VSVkVSOiBcIuacjeWKoeWZqOWkhOeQhuivt+axguWksei0pe+8jOivt+eojeWQjumHjeivleOAglwiLFxyXG4gIEdFTkVSQUw6IFwi5Y+R6YCB5raI5oGv5pe25Ye6546w6ZSZ6K+v77yM6K+356iN5ZCO6YeN6K+V44CCXCIsXHJcbiAgU1RSRUFNOiBcIua1geW8j+WTjeW6lOS4reaWre+8jOivt+WIt+aWsOmhtemdoumHjeivleOAglwiLFxyXG4gIEFQSV9LRVlfTUlTU0lORzogXCLnvLrlsJFBUEnlr4bpkqXvvIzor7fmo4Dmn6Xnjq/looPphY3nva7jgIJcIixcclxuICBCT1RfSURfTUlTU0lORzogXCLnvLrlsJHmnLrlmajkurpJRO+8jOivt+ajgOafpeeOr+Wig+mFjee9ruOAglwiLFxyXG4gIFBBUkFNRVRFUl9FUlJPUjogXCJBUEnlj4LmlbDplJnor6/vvIzor7fogZTns7vlvIDlj5HkurrlkZjjgIJcIixcclxufTtcclxuXHJcbi8qKlxyXG4gKiDmnoTlu7rlqpLkvZPlhoXlrrnkuLpDb3plIEFQSeWPr+aOpeWPl+eahOagvOW8j1xyXG4gKiBAcGFyYW0gbWVkaWEg5aqS5L2T5YaF5a655pWw57uEXHJcbiAqIEByZXR1cm5zIOi9rOaNouWQjueahENvemXmoLzlvI/lqpLkvZPlhoXlrrlcclxuICovXHJcbmNvbnN0IGZvcm1hdE1lZGlhQ29udGVudCA9IChtZWRpYTogTWVkaWFDb250ZW50W10pID0+IHtcclxuICBpZiAoIW1lZGlhIHx8IG1lZGlhLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFtdO1xyXG5cclxuICByZXR1cm4gbWVkaWEubWFwKChpdGVtKSA9PiAoe1xyXG4gICAgdHlwZTogaXRlbS50eXBlLnRvTG93ZXJDYXNlKCksXHJcbiAgICB1cmw6IGl0ZW0udXJsLFxyXG4gICAgLy8g5qC55o2uQ296ZSBBUEnnmoTopoHmsYLlj6/og73pnIDopoHmt7vliqDlhbbku5blrZfmrrVcclxuICB9KSk7XHJcbn07XHJcblxyXG4vKipcclxuICog5Y+R6YCB5raI5oGv5YiwQ296ZSBBUEnlubbojrflj5bmtYHlvI/lk43lupQgKOmAmui/h+acrOWcsEFQSeS7o+eQhilcclxuICpcclxuICogQHBhcmFtIG1lc3NhZ2Ug55So5oi35raI5oGv5YaF5a65XHJcbiAqIEBwYXJhbSBtZWRpYSDlqpLkvZPlhoXlrrnmlbDnu4RcclxuICogQHBhcmFtIG9uQ2h1bmsg5o6l5pS25pWw5o2u5Z2X55qE5Zue6LCD5Ye95pWwXHJcbiAqIEBwYXJhbSBvbkNvbXBsZXRlIOWTjeW6lOWujOaIkOeahOWbnuiwg+WHveaVsFxyXG4gKiBAcmV0dXJucyDmuIXnkIblh73mlbDvvIznlKjkuo7kuK3mlq3or7fmsYJcclxuICovXHJcbmV4cG9ydCBjb25zdCBzZW5kTWVzc2FnZVRvQ296ZSA9IGFzeW5jIChcclxuICBtZXNzYWdlOiBzdHJpbmcsXHJcbiAgbWVkaWE6IE1lZGlhQ29udGVudFtdID0gW10sXHJcbiAgb25DaHVuazogKGNodW5rOiBzdHJpbmcpID0+IHZvaWQsXHJcbiAgb25Db21wbGV0ZT86ICgpID0+IHZvaWRcclxuKTogUHJvbWlzZTwoKSA9PiB2b2lkPiA9PiB7XHJcbiAgLy8g5Yib5bu6QWJvcnRDb250cm9sbGVy55So5LqO5Lit5pat6K+35rGCXHJcbiAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICBjb25zdCBzaWduYWwgPSBjb250cm9sbGVyLnNpZ25hbDtcclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIOaehOW7uuivt+axguS9kyAtIOS9v+eUqOacrOWcsEFQSeS7o+eQhu+8jOmAgumFjUNvemUgQVBJIHYzXHJcbiAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcclxuICAgICAgdXNlcl9pZDogXCJ1c2VyX1wiICsgRGF0ZS5ub3coKSwgLy8g55Sf5oiQ5LiA5Liq5ZSv5LiA55qE55So5oi3SURcclxuICAgICAgbWVzc2FnZXM6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICByb2xlOiBcInVzZXJcIixcclxuICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UsXHJcbiAgICAgICAgICAvLyDlpoLmnpzmnInlqpLkvZPlhoXlrrnvvIzliJnmt7vliqDliLDor7fmsYLkuK1cclxuICAgICAgICAgIC4uLihtZWRpYS5sZW5ndGggPiAwICYmIHsgbWVkaWE6IGZvcm1hdE1lZGlhQ29udGVudChtZWRpYSkgfSksXHJcbiAgICAgICAgfSxcclxuICAgICAgXSxcclxuICAgICAgc3RyZWFtOiB0cnVlLCAvLyDlkK/nlKjmtYHlvI/lk43lupRcclxuICAgICAgYXV0b19zYXZlX2hpc3Rvcnk6IHRydWUsIC8vIOiHquWKqOS/neWtmOWOhuWPsuiusOW9lVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIuWHhuWkh+WPkemAgeivt+axguWIsOacrOWcsEFQSeS7o+eQhjpcIiwgXCIvYXBpL2NoYXRcIik7XHJcbiAgICBjb25zb2xlLmxvZyhcIuivt+axguS9kzpcIiwgSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpKTtcclxuXHJcbiAgICAvLyDlj5HpgIHor7fmsYLliLDmnKzlnLBBUEnku6PnkIZcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvYXBpL2NoYXRcIiwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcclxuICAgICAgc2lnbmFsLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJBUEnlk43lupTnirbmgIE6XCIsIHJlc3BvbnNlLnN0YXR1cyk7XHJcbiAgICBjb25zb2xlLmxvZyhcIkFQSeWTjeW6lOWktOmDqDpcIiwgT2JqZWN0LmZyb21FbnRyaWVzKHJlc3BvbnNlLmhlYWRlcnMuZW50cmllcygpKSk7XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJBUEnplJnor686XCIsIHJlc3BvbnNlLnN0YXR1cywgZXJyb3JUZXh0KTtcclxuICAgICAgb25DaHVuayhg5pyN5Yqh5Zmo6L+U5Zue6ZSZ6K+vOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICAgICAgaWYgKG9uQ29tcGxldGUpIG9uQ29tcGxldGUoKTsgLy8g6YCa55+l5a6M5oiQ77yI5Ye66ZSZ77yJXHJcbiAgICAgIHJldHVybiAoKSA9PiBjb250cm9sbGVyLmFib3J0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5qOA5p+l5ZON5bqU5piv5ZCm5pSv5oyB5rWB5byP5Lyg6L6TXHJcbiAgICBpZiAoIXJlc3BvbnNlLmJvZHkpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIuWTjeW6lOS4jeaUr+aMgea1geW8j+S8oOi+k1wiKTtcclxuICAgICAgb25DaHVuayhFUlJPUl9NRVNTQUdFUy5TVFJFQU0pO1xyXG4gICAgICBpZiAob25Db21wbGV0ZSkgb25Db21wbGV0ZSgpOyAvLyDpgJrnn6XlrozmiJDvvIjlh7rplJnvvIlcclxuICAgICAgcmV0dXJuICgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlpITnkIbmtYHlvI/lk43lupRcclxuICAgIGNvbnN0IHJlYWRlciA9IHJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKCk7XHJcbiAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCLlvIDlp4vlpITnkIbmtYHlvI/lk43lupRcIik7XHJcblxyXG4gICAgLy8g6K6w5b2V5pS25Yiw55qE5oC75YaF5a6577yI55So5LqO6LCD6K+V77yJXHJcbiAgICBsZXQgcmVjZWl2ZWRDb250ZW50ID0gXCJcIjtcclxuICAgIGxldCBoYXNSZWNlaXZlZENvbnRlbnQgPSBmYWxzZTtcclxuXHJcbiAgICAvLyDlvILmraXlpITnkIbmtYHmlbDmja5cclxuICAgIGNvbnN0IHByb2Nlc3NTdHJlYW0gPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgbGV0IGlzRG9uZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICB3aGlsZSAoIWlzRG9uZSkge1xyXG4gICAgICAgICAgY29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcclxuXHJcbiAgICAgICAgICBpZiAoZG9uZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIua1geW8j+WTjeW6lOWujOaIkO+8iOivu+WPluWZqOi/lOWbnmRvbmXvvIlcIik7XHJcbiAgICAgICAgICAgIGlmICghaGFzUmVjZWl2ZWRDb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmlbTkuKrlk43lupTov4fnqIvkuK3mnKrmlLbliLDku7vkvZXmnInmlYjlhoXlrrlcIik7XHJcbiAgICAgICAgICAgICAgb25DaHVuayhcIuaKseatie+8jOacjeWKoeWZqOayoeaciei/lOWbnuacieaViOWbnuWkjeOAglwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob25Db21wbGV0ZSkgb25Db21wbGV0ZSgpOyAvLyDpgJrnn6XliY3nq6/lk43lupTlt7LlrozmiJBcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8g6Kej56CB5LqM6L+b5Yi25pWw5o2uXHJcbiAgICAgICAgICBjb25zdCBjaHVuayA9IGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogdHJ1ZSB9KTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwi5pS25Yiw5pWw5o2u5Z2X5Y6f5aeL5YaF5a65OlwiLCBjaHVuayk7XHJcbiAgICAgICAgICByZWNlaXZlZENvbnRlbnQgKz0gY2h1bms7XHJcblxyXG4gICAgICAgICAgLy8g5bCd6K+V5LiN5ZCM55qE6Kej5p6Q5pa55byP5aSE55CGU1NF5qC85byP55qE5pWw5o2uXHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyAxLiDpppblhYjlsJ3or5XmoIflh4bnmoRTU0XmoLzlvI/op6PmnpDvvIhkYXRhOiB7Li4ufSDmoLzlvI/vvIlcclxuICAgICAgICAgICAgY29uc3QgbGluZXMgPSBjaHVua1xyXG4gICAgICAgICAgICAgIC5zcGxpdChcIlxcblwiKVxyXG4gICAgICAgICAgICAgIC5maWx0ZXIoKGxpbmUpID0+IGxpbmUudHJpbSgpICE9PSBcIlwiKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBoYXNQcm9jZXNzZWRWYWxpZERhdGEgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5aSE55CG6KGMOlwiLCBsaW5lKTtcclxuXHJcbiAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIOajgOafpeaYr+WQpuS4ulNTReagvOW8j1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aChcImRhdGE6XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25TdHIgPSBsaW5lLnN1YnN0cmluZyg1KS50cmltKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAvLyDmo4Dmn6XmmK/lkKbkuLpbRE9ORV3moIforrBcclxuICAgICAgICAgICAgICAgICAgaWYgKGpzb25TdHIgPT09IFwiW0RPTkVdXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuaUtuWIsFtET05FXeagh+iusO+8jOWTjeW6lOe7k+adn1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBpc0RvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlKSBvbkNvbXBsZXRlKCk7IC8vIOmAmuefpeWJjeerr+WTjeW6lOW3suWujOaIkFxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAvLyDlsJ3or5Xop6PmnpBKU09O5pWw5o2uXHJcbiAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoanNvblN0cikgYXMgTExNUmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLop6PmnpDliLBKU09O5pWw5o2uOlwiLCBkYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5pyJ6ZSZ6K+v5L+h5oGvXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSBcImZhaWxlZFwiICYmIGRhdGEubGFzdF9lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNvemUgQVBJ6L+U5Zue6ZSZ6K+vOlwiLCBkYXRhLmxhc3RfZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmxhc3RfZXJyb3IuY29kZSA9PT0gNDAwMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gYCR7RVJST1JfTUVTU0FHRVMuUEFSQU1FVEVSX0VSUk9Sfe+8iOmUmeivr+egge+8miR7ZGF0YS5sYXN0X2Vycm9yLmNvZGV977yM5L+h5oGv77yaJHtkYXRhLmxhc3RfZXJyb3IubXNnfe+8iWBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGDplJnor68gJHtkYXRhLmxhc3RfZXJyb3IuY29kZX06ICR7ZGF0YS5sYXN0X2Vycm9yLm1zZ31gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgb25DaHVuayhlcnJvck1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpc0RvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUpIG9uQ29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CG5a+56K+d5YaF5a655ZON5bqUXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS5jaG9pY2VzICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLmNob2ljZXMubGVuZ3RoID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS5jaG9pY2VzWzBdLmRlbHRhICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLmNob2ljZXNbMF0uZGVsdGEuY29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgLy8g5aSE55CG5a6Y5pa55qCH5YeG5qC85byP77yIY2hvaWNlcy5kZWx0YS5jb250ZW5077yJXHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNodW5rKGRhdGEuY2hvaWNlc1swXS5kZWx0YS5jb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgIGhhc1JlY2VpdmVkQ29udGVudCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICBoYXNQcm9jZXNzZWRWYWxpZERhdGEgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5jb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyDlpITnkIblhbzlrrnmoLzlvI/vvIhjb250ZW505a2X5q6177yJXHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNodW5rKGRhdGEuY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBoYXNSZWNlaXZlZENvbnRlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaGFzUHJvY2Vzc2VkVmFsaWREYXRhID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOajgOafpeWTjeW6lOaYr+WQpuWMheWQq+WujOaIkOagh+W/l1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZG9uZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgKGRhdGEuY2hvaWNlcyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmNob2ljZXMubGVuZ3RoID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmNob2ljZXNbMF0uZmluaXNoX3JlYXNvbiA9PT0gXCJzdG9wXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWTjeW6lOaVsOaNruWMheWQq+WujOaIkOagh+iusFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGlzRG9uZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAob25Db21wbGV0ZSkgb25Db21wbGV0ZSgpOyAvLyDpgJrnn6XliY3nq6/lk43lupTlt7LlrozmiJBcclxuICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIuino+aekEpTT07mlbDmja7lh7rplJk6XCIsIGUpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyAyLiDlsJ3or5Xop6PmnpDpnZ7moIflh4bmoLzlvI/vvIjlj6/og73mmK/nm7TmjqXnmoTmlofmnKzlhoXlrrnvvIlcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxpbmUudHJpbSgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5LiN5pivZGF0YTrlvIDlpLTkvYbmnInlhoXlrrnvvIzlj6/og73mmK/nm7TmjqXnmoTmlofmnKxcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmlLbliLDpnZ5TU0XmoLzlvI/mlbDmja7vvIzlsJ3or5Xnm7TmjqXlpITnkIY6XCIsIGxpbmUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgLy8g5bCd6K+V5L2c5Li6SlNPTuino+aekFxyXG4gICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGxpbmUpIGFzIGFueTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNodW5rKGRhdGEuY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBoYXNSZWNlaXZlZENvbnRlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgaGFzUHJvY2Vzc2VkVmFsaWREYXRhID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDkuI3mmK9KU09O77yM55u05o6l5L2c5Li65paH5pys5YaF5a655aSE55CGXHJcbiAgICAgICAgICAgICAgICAgICAgb25DaHVuayhsaW5lKTtcclxuICAgICAgICAgICAgICAgICAgICBoYXNSZWNlaXZlZENvbnRlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc1Byb2Nlc3NlZFZhbGlkRGF0YSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCLlpITnkIbooYzmlbDmja7lh7rplJk6XCIsIGUpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g5aaC5p6c5rKh5pyJ5LuO5qCH5YeG5qC85byP5Lit5o+Q5Y+W5Yiw5pWw5o2u77yM5bCd6K+V5YW25LuW5qC85byPXHJcbiAgICAgICAgICAgIGlmICghaGFzUHJvY2Vzc2VkVmFsaWREYXRhICYmIGNodW5rLnRyaW0oKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLlsJ3or5XlpITnkIbpnZ7moIflh4bmoLzlvI/nmoTmlbTlnZfmlbDmja5cIik7XHJcblxyXG4gICAgICAgICAgICAgIC8vIDMuIOWwneivleaVtOS4quaVsOaNruWdl+S9nOS4ukpTT05cclxuICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoY2h1bmsudHJpbSgpKSBhcyBhbnk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2h1bmsoZGF0YS5jb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgaGFzUmVjZWl2ZWRDb250ZW50ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgb25DaHVuayhkYXRhLnRleHQpO1xyXG4gICAgICAgICAgICAgICAgICBoYXNSZWNlaXZlZENvbnRlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZG9uZSkge1xyXG4gICAgICAgICAgICAgICAgICBpc0RvbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICBpZiAob25Db21wbGV0ZSkgb25Db21wbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIDQuIOWmguaenOS4jeaYr0pTT07vvIzlj6/og73mmK/nuq/mlofmnKzlhoXlrrlcclxuICAgICAgICAgICAgICAgIGlmIChjaHVuay50cmltKCkubGVuZ3RoID4gMCAmJiAhY2h1bmsuaW5jbHVkZXMoXCJkYXRhOlwiKSkge1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuS9nOS4uue6r+aWh+acrOWGheWuueWkhOeQhlwiKTtcclxuICAgICAgICAgICAgICAgICAgb25DaHVuayhjaHVuay50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgICBoYXNSZWNlaXZlZENvbnRlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIuino+aekOa1geaVsOaNruWdl+WHuumUmTpcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5aaC5p6c5rWB57uT5p2f5L2G5rKh5pS25Yiw5Lu75L2V5YaF5a6577yM5Y+R6YCB5LiA5Liq6buY6K6k5raI5oGvXHJcbiAgICAgICAgaWYgKCFoYXNSZWNlaXZlZENvbnRlbnQpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwi5pyq5pS25Yiw5Lu75L2V5YaF5a6577yM5Y+R6YCB6buY6K6k5raI5oGvXCIpO1xyXG4gICAgICAgICAgb25DaHVuayhcIuaIkeayoeacieaUtuWIsOacieaViOeahOWbnuWkjeOAguivt+eojeWQjuWGjeivleOAglwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOa1geWkhOeQhuWujOaIkFxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwi5rWB5aSE55CG5a6M5oiQXCIpO1xyXG4gICAgICAgIGlmIChvbkNvbXBsZXRlKSBvbkNvbXBsZXRlKCk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIuivu+WPlua1geWHuumUmTpcIiwgZXJyb3IpO1xyXG5cclxuICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gXCJBYm9ydEVycm9yXCIpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwi6K+35rGC6KKr5Lit5patXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwi6K+75Y+W5rWB5Ye66ZSZOlwiLCBlcnJvcik7XHJcbiAgICAgICAgICBvbkNodW5rKEVSUk9SX01FU1NBR0VTLlNUUkVBTSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWhhc1JlY2VpdmVkQ29udGVudCkge1xyXG4gICAgICAgICAgb25DaHVuayhcIuWkhOeQhuWTjeW6lOaXtuWHuumUme+8jOivt+eojeWQjuWGjeivleOAglwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChvbkNvbXBsZXRlKSBvbkNvbXBsZXRlKCk7IC8vIOmAmuefpeWJjeerr+WTjeW6lOW3suWujOaIkO+8iOWHuumUme+8iVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIOW8gOWni+WkhOeQhua1gVxyXG4gICAgcHJvY2Vzc1N0cmVhbSgpO1xyXG5cclxuICAgIC8vIOi/lOWbnua4heeQhuWHveaVsFxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xyXG4gICAgICBpZiAob25Db21wbGV0ZSkgb25Db21wbGV0ZSgpOyAvLyDnoa7kv53lj5bmtojor7fmsYLml7bkuZ/pgJrnn6XlrozmiJBcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCLor7fmsYLplJnor686XCIsIGVycm9yKTtcclxuICAgIGlmIChlcnJvci5uYW1lID09PSBcIkFib3J0RXJyb3JcIikge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIuivt+axguiiq+S4reaWrVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9uQ2h1bmsoRVJST1JfTUVTU0FHRVMuTkVUV09SSyk7XHJcbiAgICB9XHJcbiAgICBpZiAob25Db21wbGV0ZSkgb25Db21wbGV0ZSgpOyAvLyDpgJrnn6XliY3nq6/lk43lupTlt7LlrozmiJDvvIjlh7rplJnvvIlcclxuICAgIHJldHVybiAoKSA9PiBjb250cm9sbGVyLmFib3J0KCk7XHJcbiAgfVxyXG59O1xyXG4iXSwibmFtZXMiOlsiRVJST1JfTUVTU0FHRVMiLCJORVRXT1JLIiwiU0VSVkVSIiwiR0VORVJBTCIsIlNUUkVBTSIsIkFQSV9LRVlfTUlTU0lORyIsIkJPVF9JRF9NSVNTSU5HIiwiUEFSQU1FVEVSX0VSUk9SIiwiZm9ybWF0TWVkaWFDb250ZW50IiwibWVkaWEiLCJsZW5ndGgiLCJtYXAiLCJpdGVtIiwidHlwZSIsInRvTG93ZXJDYXNlIiwidXJsIiwic2VuZE1lc3NhZ2VUb0NvemUiLCJtZXNzYWdlIiwib25DaHVuayIsIm9uQ29tcGxldGUiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwic2lnbmFsIiwicmVxdWVzdEJvZHkiLCJ1c2VyX2lkIiwiRGF0ZSIsIm5vdyIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJzdHJlYW0iLCJhdXRvX3NhdmVfaGlzdG9yeSIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5Iiwic3RhdHVzIiwiT2JqZWN0IiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwib2siLCJlcnJvclRleHQiLCJ0ZXh0IiwiZXJyb3IiLCJhYm9ydCIsInJlYWRlciIsImdldFJlYWRlciIsImRlY29kZXIiLCJUZXh0RGVjb2RlciIsInJlY2VpdmVkQ29udGVudCIsImhhc1JlY2VpdmVkQ29udGVudCIsInByb2Nlc3NTdHJlYW0iLCJpc0RvbmUiLCJkb25lIiwidmFsdWUiLCJyZWFkIiwiY2h1bmsiLCJkZWNvZGUiLCJsaW5lcyIsInNwbGl0IiwiZmlsdGVyIiwibGluZSIsInRyaW0iLCJoYXNQcm9jZXNzZWRWYWxpZERhdGEiLCJzdGFydHNXaXRoIiwianNvblN0ciIsInN1YnN0cmluZyIsImRhdGEiLCJwYXJzZSIsImxhc3RfZXJyb3IiLCJlcnJvck1zZyIsImNvZGUiLCJtc2ciLCJjaG9pY2VzIiwiZGVsdGEiLCJmaW5pc2hfcmVhc29uIiwiZSIsIndhcm4iLCJpbmNsdWRlcyIsIm5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/services/cozeService.ts\n"));

/***/ })

});